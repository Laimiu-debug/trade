# 趋势票选股系统 v1.0

<aside>

**定位**：趋势中线选股系统，目标是找到"不断创新高、均线多头排列"的趋势票，在回调到关键位置时介入，吃趋势延续的波段。

</aside>

---

## 一、目标定义

---

## 二、筛选漏斗（5 层过滤）

### 第 1 层：基础池（数据源）

```
输入：全市场 A 股
过滤条件：
  - 板块 IN (主板, 创业板)
  - 非 ST
  - 上市天数 > 250（剔除次新）
  - 流通市值 > 30 亿
输出：约 2000–3000 只
```

### 第 2 层：涨幅筛选

```
输入：第 1 层结果
计算：近 20 个交易日涨幅 = (今日收盘价 - 20日前收盘价) / 20日前收盘价 × 100%
过滤条件：
  - 20日涨幅 BETWEEN 20% AND 100%
排序：按涨幅降序
输出：取前 300 只 → 候选池
```

### 第 3 层：趋势形态确认

```
输入：第 2 层结果（300 只）
过滤条件（满足 ≥ 3 条）：

  条件 A：均线多头排列
    MA5 > MA10 > MA20 > MA60
    且 收盘价 > MA20

  条件 B：创新高
    近 20 日内，最高价 > 前 60 日最高价（至少出现 1 次）

  条件 C：量价配合
    上涨日平均成交量 > 下跌日平均成交量 × 1.2
    （上涨日 = 收盘价 > 开盘价 的交易日）

  条件 D：回调健康
    当前价格距离近 20 日最高点的回撤 BETWEEN 5% AND 25%
    回撤 = (近20日最高价 - 当前收盘价) / 近20日最高价 × 100%

输出：约 30–50 只 → 趋势确认池
```

### 第 4 层：买点距离筛选

```
输入：第 3 层结果（30–50 只）
计算：
  理想买点 = MAX(MA10, MA20)
  买点距离 = (当前收盘价 - 理想买点) / 理想买点 × 100%

过滤条件：
  买点距离 BETWEEN -5% AND 10%
  （即：当前价格在均线附近，不要追高太多）

输出：约 10–20 只 → 待买候选池
```

### 第 5 层：优选排序（取前 5）

```
输入：第 4 层结果（10–20 只）
排序规则（权重从高到低）：

  1. 题材强度（需人工判断，或用板块涨幅代替）
     板块近 5 日涨幅排名 → 越靠前越好

  2. 回撤幅度适中
     回撤 10–20% 最佳 → 得分最高
     回撤 < 5% 或 > 25% → 得分最低

  3. 成交额
     日均成交额（近 5 日）> 5 亿 → 优先

  4. 波动率适中
     近 20 日振幅标准差 → 越小越稳定 → 越好

输出：取前 5 只 → 最终待买清单
```

---

## 三、买点规则

### 买点类型 A：回踩均线买入

```
触发条件：
  - 收盘价 ≤ MA20 × 1.03（接近或触及 20 日线）
  - 当日成交量 < 5 日均量（缩量）
  - 收盘价 > MA20 × 0.97（未有效跌破）
动作：次日开盘买入
```

### 买点类型 B：突破回踩确认

```
触发条件：
  - 近 5 日内突破过前高（创 60 日新高）
  - 当前回踩至突破位附近（回撤 < 5%）
  - 缩量（当日量 < 突破日量 × 0.6）
动作：次日开盘买入
```

---

## 四、持仓与卖出规则

### 止损规则

- 收盘价 < MA20 × 0.97 → 次日开盘卖出
- 或：收盘价 < 买入价 × 0.92（亏损 8%）→ 次日开盘卖出

### 止盈规则（分批）

- 盈利 15–20% → 卖出 1/3
- 盈利 30%+ → 再卖 1/3
- 剩余仓位用移动止损：从最高点回撤 10% 则清仓

### 强制卖出

- MA5 下穿 MA20（均线死叉）
- 放量下跌（当日跌幅 > 5% 且量 > 5 日均量 × 1.5）

---

## 五、复盘节奏

---

## 六、代码实现建议（伪代码）

```python
# 1. 数据准备
def load_data():
    # 从通达信导出：日线数据（OHLCV）、板块数据、流通市值

# 2. 第 1 层：基础过滤
def filter_basic(df):
    return df[
        (df['board'].isin(['主板', '创业板'])) &
        (~df['name'].str.contains('ST')) &
        (df['list_days'] > 250) &
        (df['float_mv'] > 30e8)
    ]

# 3. 第 2 层：涨幅筛选
def filter_by_return(df, top_n=300):
    df['return_20d'] = df['close'].pct_change(20)
    df = df[(df['return_20d'] >= 0.2) & (df['return_20d'] <= 1.0)]
    return df.nlargest(top_n, 'return_20d')

# 4. 第 3 层：趋势形态
def filter_trend(df):
    # 计算 MA5, MA10, MA20, MA60
    # 检查均线多头、创新高、量价配合、回调幅度
    # 返回满足 ≥ 3 条的股票

# 5. 第 4 层：买点距离
def filter_buy_point(df):
    df['ideal_buy'] = df[['ma10', 'ma20']].max(axis=1)
    df['distance'] = (df['close'] - df['ideal_buy']) / df['ideal_buy']
    return df[(df['distance'] >= -0.05) & (df['distance'] <= 0.10)]

# 6. 第 5 层：排序取 Top 5
def rank_and_select(df, top_n=5):
    # 按板块强度、回撤、成交额、波动率综合打分
    return df.nlargest(top_n, 'score')

# 7. 主流程
def main():
    df = load_data()
    df = filter_basic(df)
    df = filter_by_return(df)
    df = filter_trend(df)
    df = filter_buy_point(df)
    result = rank_and_select(df)
    return result
```

---

## 七、回测验证指标

---

## 八、本次对话总结

### 背景

- 每月亏损约 20%，核心问题是"拿不住票"、"左右横跳两头挨打"
- 想从短线龙头转向趋势中线票

### 关键认知

1. **涨幅榜是结果，不是原因** —— 要从"事后看牛股"变成"事前抓启动"
2. **问题不在选股，在执行** —— 换什么模式都会亏，如果执行层不改
3. **趋势票靠"少动"赚钱** —— 复盘频率要降低，操作频率要控制

### 策略选择

- 从涨幅榜 100–300 名找"刚启动"的票
- 用 5 层漏斗筛选，每周更新，最终保留 5 只
- 只在回调到均线附近时买入，不追高

### 下一步

- [ ]  用通达信数据 + AI 编写代码跑回测
- [ ]  验证选股逻辑的胜率、盈亏比、最大回撤
- [ ]  如果回测通过，开始实盘小仓位验证

---

<aside>

**免责声明**：以上仅为个人交易策略研究与学习记录，不构成任何投资建议。

</aside>